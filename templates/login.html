{% extends "base.html" %}

{% block content %}
<h2>Prijava</h2>

<form id="loginForm" class="login-form">
    <input type="email" id="email" placeholder="Email" required>
    <input type="password" id="password" placeholder="Lozinka" required>
    <button type="submit">UÄ‘i</button>
</form>

<p id="error" style="color:red;"></p>
{% endblock %}

{% block scripts %}
<script>
document.getElementById("loginForm").addEventListener("submit", async function (e) {
    e.preventDefault();

    const email = document.getElementById("email").value;
    const password = document.getElementById("password").value;
    const errorEl = document.getElementById("error");

    const { data, error } = await supabaseClient.auth.signInWithPassword({
        email,
        password
    });

    if (error) {
        errorEl.textContent = error.message;
        return;
    }

    // login OK
    window.location.href = "/";
});
</script>
{% endblock %}
